# Figmaプラグイン インストール＆テストガイド

## 🎉 ビルド完了！

プラグインのビルドが成功しました。以下の手順でFigmaにインストールしてテストできます。

## 📦 ビルド済みファイル
- `dist/code.js` - プラグインのメインコード
- `dist/ui.html` - プラグインのUI
- `dist/ui.js` - UIのJavaScript

## 🚀 Figmaへのインストール手順

### 1. Figma Desktopアプリを開く
Webブラウザ版ではなく、**Figma Desktopアプリ**を使用してください。

### 2. 開発プラグインをインポート
1. Figmaのメニューバーから以下を選択：
   ```
   Plugins → Development → Import plugin from manifest...
   ```

2. ファイル選択ダイアログが開いたら、以下のファイルを選択：
   ```
   /Users/reiharada/dev/figma-plugin/figjam_random_sticky_note/manifest.json
   ```

3. 「Open」をクリック

### 3. プラグインの確認
インポートが成功すると、以下のメッセージが表示されます：
- "Random Sticky Note Positioner" が開発プラグインとして追加されました

## 🧪 プラグインのテスト手順

### 1. Figjamファイルを開く
1. Figmaで新規ファイルを作成、または既存ファイルを開く
2. ファイルタイプを「FigJam」に設定（右上のアイコンから切り替え可能）

### 2. テスト用要素を作成
1. スティッキーノートを3-5個作成
   - ツールバーから付箋アイコンを選択
   - ボード上でクリックして配置

2. 他の要素も追加可能：
   - 図形（円、四角形など）
   - テキスト
   - 接続線

### 3. 要素を選択
1. Shiftキーを押しながら、複数の要素をクリック
2. または、ドラッグで範囲選択

### 4. プラグインを実行
1. メニューから以下を選択：
   ```
   Plugins → Development → Random Sticky Note Positioner
   ```

2. プラグインUIが開きます

### 5. 機能をテスト

#### Step 1: Stack Elements（要素を重ねる）
1. 「📚 Stack Elements」ボタンをクリック
2. 選択した全要素が中心点に集まります

#### Step 2: Randomize（ランダム配置）
1. スライダーで散布半径を調整（100px〜2000px）
2. 「🎲 Randomize Positions」ボタンをクリック
3. 要素がランダムな位置に配置されます

## 🔧 開発モード

コードを修正しながらテストする場合：

### 1. ウォッチモードを起動
```bash
npm run watch
```
これにより、コード変更時に自動的に再ビルドされます。

### 2. プラグインをリロード
コードを変更した後：
1. Figma内でプラグインを閉じる
2. `Cmd + Option + P`（Mac）または `Ctrl + Alt + P`（Windows）でプラグインを再実行
3. または、メニューから再度プラグインを選択

## 📝 トラブルシューティング

### プラグインが表示されない場合
1. Figma Desktopアプリを使用しているか確認
2. manifest.jsonのパスが正しいか確認
3. Figmaを再起動してみる

### エラーが発生する場合
1. Figjamファイルであることを確認（Figmaデザインファイルではない）
2. 要素が選択されているか確認
3. コンソールでエラーを確認：
   - Figmaメニュー → Plugins → Development → Open Console

### ビルドエラーの場合
```bash
# クリーンビルド
npm run clean
npm run build
```

## 🎯 期待される動作

1. **要素未選択時**: 「No elements selected」と表示
2. **1個選択時**: 「1 element selected」と表示、ボタンは無効
3. **2個以上選択時**: ボタンが有効化、操作可能
4. **Stack実行後**: 全要素が同じ位置に重なる
5. **Randomize実行後**: 要素が指定半径内にランダム配置

## 🔍 デバッグ情報

プラグインの動作状況を確認：
- **選択数表示**: UIに現在の選択要素数が表示
- **通知メッセージ**: 操作完了時に成功メッセージ
- **エラー表示**: 問題発生時にエラーメッセージ

---

準備完了！Figmaでプラグインをテストしてみてください。 🚀